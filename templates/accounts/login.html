{% extends "base.html" %}
{% load static %}

{% block title %}Login - Brews &amp; Chews{% endblock %}

{% block main_class %}auth-main{% endblock %}

{% block content %}

<!-- Login form for existing users -->
<section aria-labelledby="login-title" class="auth-card">
    
    <!-- Page title -->
    <h1 id="login-title" class="hero-heading auth-title">Sign In to Your Account</h1>

    <!-- Error alert (hidden by default) -->
    <div class="auth-alert" 
         role="alert" 
         aria-live="polite" 
         aria-atomic="true" 
         data-auth-alert 
         {% if not alert_message %}hidden{% endif %}>
        {{ alert_message|default:"Invalid username or password. Please try again." }}
    </div>

    <!-- Login form -->
    <form action="{% url 'accounts:login' %}" 
          method="post" 
          class="auth-form" 
          data-login-form>
        
        {% csrf_token %}
        
        <!-- Username or email field -->
        <div class="auth-field">
            <label for="login-identifier" class="auth-label">Username or Email</label>
            <input id="login-identifier" 
                   name="identifier" 
                   type="text" 
                   autocomplete="username" 
                   required 
                   placeholder="Enter your username or email" 
                   class="auth-input" 
                   value="{{ form.identifier.value|default_if_none:'' }}">
        </div>

        <!-- Password field -->
        <div class="auth-field">
            <label for="login-password" class="auth-label">Password</label>
            <input id="login-password" 
                   name="password" 
                   type="password" 
                   autocomplete="current-password" 
                   required 
                   placeholder="Enter your password" 
                   class="auth-input">
        </div>

        <!-- Submit button -->
        <div class="auth-actions">
            <button type="submit" class="btn auth-submit">Sign In</button>
        </div>
    </form>

    <!-- Link to signup page -->
    <p class="auth-alt">
        <em>Don't have an account?</em> 
        <a href="{% url 'accounts:signup' %}" class="links">Sign Up</a>
    </p>
</section>

{% endblock %}

<!-- Load validation JavaScript -->
{% block extra_js %}
<script src="{% static 'js/auth.js' %}" defer></script>
{% endblock %}