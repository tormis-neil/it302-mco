{% extends "base.html" %}
{% load static %}

{% block title %}Payment Successful - Brews &amp; Chews{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}

{% block main_class %}dashboard-main{% endblock %}

{% block content %}

<!-- Hero section -->
<section class="dashboard-hero">
    <div>
        <p class="dashboard-eyebrow">Payment Complete</p>
        <h1 class="dashboard-title">Thank you for your order!</h1>
        <p class="dashboard-subtitle">Your payment has been initiated and your order is being processed.</p>
    </div>
    <a href="{% url 'orders:history' %}" class="btn dashboard-cta">View Order History</a>
</section>

<!-- Order confirmation details -->
<section class="dashboard-section" aria-labelledby="order-confirmation">
    <h2 id="order-confirmation" class="dashboard-section__title">Order Details</h2>

    <div class="checkout-summary" style="max-width: 600px;">
        <!-- Order reference -->
        <div class="cart-summary__row" style="margin-bottom: 1rem;">
            <strong>Order Reference:</strong>
            <span>{{ order.reference_number }}</span>
        </div>

        <!-- Order status -->
        <div class="cart-summary__row" style="margin-bottom: 1rem;">
            <strong>Status:</strong>
            <span class="status-badge status-{{ order.status }}">
                {{ order.get_status_display }}
            </span>
        </div>

        <!-- Contact info -->
        <div class="cart-summary__row" style="margin-bottom: 1rem;">
            <strong>Contact Name:</strong>
            <span>{{ order.contact_name }}</span>
        </div>

        {% if order.contact_phone %}
        <div class="cart-summary__row" style="margin-bottom: 1rem;">
            <strong>Phone:</strong>
            <span>{{ order.contact_phone }}</span>
        </div>
        {% endif %}

        <!-- Items list -->
        <h3 style="margin-top: 1.5rem; margin-bottom: 0.5rem;">Items Ordered</h3>
        <ul class="checkout-items">
            {% for item in order.items.all %}
            <li class="checkout-items__entry">
                <div>
                    <strong>{{ item.menu_item_name }}</strong>
                    <span class="checkout-items__meta">Qty {{ item.quantity }}</span>
                </div>
                <span>&#8369;{{ item.line_total|floatformat:2 }}</span>
            </li>
            {% endfor %}
        </ul>

        <!-- Totals -->
        <dl class="cart-summary__list">
            <div class="cart-summary__row">
                <dt>Subtotal</dt>
                <dd>&#8369;{{ order.subtotal|floatformat:2 }}</dd>
            </div>
            <div class="cart-summary__row">
                <dt>Tax (8%)</dt>
                <dd>&#8369;{{ order.tax|floatformat:2 }}</dd>
            </div>
            <div class="cart-summary__row cart-summary__total">
                <dt>Total</dt>
                <dd>&#8369;{{ order.total|floatformat:2 }}</dd>
            </div>
        </dl>

        {% if order.special_instructions %}
        <div style="margin-top: 1rem; padding: 1rem; background: var(--color-cream-light, #f5f2eb); border-radius: 8px;">
            <strong>Special Instructions:</strong>
            <p style="margin-top: 0.5rem;">{{ order.special_instructions }}</p>
        </div>
        {% endif %}
    </div>

    <!-- Next steps info -->
    <div style="margin-top: 2rem; padding: 1.5rem; background: var(--color-green-light, #e8f5e9); border-radius: 8px; max-width: 600px;">
        <h3 style="margin-bottom: 0.5rem;">What happens next?</h3>
        <ol style="margin-left: 1.5rem;">
            <li>Your payment is being verified</li>
            <li>Once confirmed, our team will prepare your order</li>
            <li>You'll see the status update in your order history</li>
            <li>Pickup your order when it's ready!</li>
        </ol>
    </div>
</section>

{% endblock %}
